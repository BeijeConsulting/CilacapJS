<!DOCTYPE html>
<html>
<head>
<style>
body {
  width: 300px;
  margin: auto;
  text-align: center;
}

table {
  margin: auto;
}

td {
  border-style: solid;
  border-size: 1px;
  width: 30px;
  height: 30px;
  text-align: center;
}
</style>
</head>
<body>

<h2>CALCULATOR</h2>

<h3 id="display">___</h3>

<table>
  <tr>
    <td id="t1" onclick="get(1)">1</td>
    <td id="t2" onclick="get(2)">2</td>
    <td id="t3" onclick="get(3)">3</td>
    <td onclick="get('+')">+</td>
  </tr>
  <tr>
    <td id="t4" onclick="get(4)">4</td>
    <td id="t5" onclick="get(5)">5</td>
    <td id="t6" onclick="get(6)">6</td>
    <td onclick="get('-')">-</td>
  </tr>
  <tr>
    <td id="t7" onclick="get(7)">7</td>
    <td id="t8" onclick="get(8)">8</td>
    <td id="t9" onclick="get(9)">9</td>
    <td onclick="get('*')">x</td>
  </tr>
  <tr>
    <td id="tAC" onclick="get('AC')">AC</td>
    <td id="t0" onclick="get(0)">0</td>
    <td id="tComma" onclick="get(',')">,</td>
    <td onclick="get('/')">/</td>
  </tr>
  <tr>
	<td id="tEq" onclick="uguale()">=</td>
</table>




<script>
let u=0;
let risultato="";
let stringa="";
let array=[];
let parziale="";
let visual="";
let simbolo;
let membro;
let membro2;
function get(valore) {
	if (valore == 'AC')
	{
		risultato=0;
		stringa="";
		parziale =0;
		simbolo="";
		array=[];
		visual="";
		document.getElementById("display").innerHTML = risultato;
		console.log(risultato);
	}
	else{
		
		if((valore== '+' || valore == '*' || valore == '/' || valore == '-' ))
		{
			/*if( valore == '=' )
			{
				array.push(stringa);
				uguale();
			}*/
			
			array.push(stringa);
			visual+=""+valore;
			console.log("visual",visual);
			document.getElementById("display").innerHTML = visual;
			stringa ="";
			operazione(valore);
			
		}
		else{
			stringa += ""+valore;
			console.log("stringa",stringa);
			visual+=""+valore;
			document.getElementById("display").innerHTML = visual;
		}
	}
	  
  
}
function operazione(valore)
{
	console.log(array.length);
	if(array.length<=1 && parziale==0 && u == 0)
	{
		simbolo=valore;
		console.log("array",array);
	}
	else
	{
		
		membro2=array.pop();
		membro=array.pop();
		if(risultato==0)
		{
			risultato=""+membro+simbolo+membro2;
			simbolo=valore;
			parziale=eval(risultato);
			console.log("risultato",risultato);
			array.unshift(parziale);
		}
		else
		{
			risultato=""+membro+simbolo+membro2;
			simbolo=valore;
			console.log(risultato);
			parziale=eval(risultato);
			console.log("membro2",membro2);
			console.log("membro",membro);
			array.unshift(parziale);
		}
		
		document.getElementById("display").innerHTML = eval(risultato)+""+valore;
		
	}
	

}

function uguale()
 {
	//u++;
	//operazione(simbolo);
	//membro2=array.pop();
	//membro=array.pop();
	//membro=visual.substring(0,visual.indexOf(simbolo));
	//membro2=visual.substring(visual.indexOf(simbolo)+1);
	if(visual.length<=3)
	{
		risultato=eval(visual);
		parziale=risultato;
		console.log("membro2",membro2);
		console.log("membro",membro);
		console.log("risultato",risultato);
		array.unshift(parziale);
		document.getElementById("display").innerHTML = risultato;
	}
	else
	{
		membro2=array.pop();
		membro=array.pop();
		risultato=""+parziale+simbolo+membro2;
		console.log("risultato",risultato);
		parziale=eval(risultato);
		document.getElementById("display").innerHTML = eval(risultato);
	}
 }


</script>







</body>
</html>